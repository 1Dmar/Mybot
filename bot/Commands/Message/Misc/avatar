const {
  Message,
  PermissionFlagsBits,
  Client,
  EmbedBuilder,
} = require("discord.js");

module.exports = {
  name: "avatar",
  description: "Get Avar Of a User !!",
  userPermissions: PermissionFlagsBits.SendMessages,
  botPermissions: PermissionFlagsBits.SendMessages,
  category: "Misc",
    type1: "message",
  cooldown: 5,
  /**
   *
   * @param {Client} client
   * @param {Message} message
   * @param {String[]} args
   * @param {String} prefix
   */
  run: async (client, message, args, prefix) => {
    try {
      const user = message.mentions.users.first() || client.users.cache.get(args[0]) || message.author;
      const avatarURL = user.displayAvatarURL({
        extension: "png",
        size: 512,
        dynamic: true
      });

      await message.reply({
        embeds: [
          new EmbedBuilder()
            .setColor("Blurple")
            .setAuthor({
              name: `Avatar Of ${user.tag}`,
              iconURL: avatarURL,
            })
            .setImage(avatarURL)
            .setTimestamp(),
        ],
      });
    } catch (error) {
      console.error("Error in avatar message command:", error);
      await message.reply({
        content: "An error occurred while fetching the avatar.",
      }).catch(() => {});
    }
  },
};
